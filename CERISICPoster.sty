%----------------------
% General Informations
%----------------------
\NeedsTeXFormat{LaTeX2e}[1999/01/01]
\ProvidesPackage{CERISICPoster}[2017/04/12 v0.2]


%-------------------
% Required Packages
%-------------------
\RequirePackage[orientation=portrait, size=a0, scale=1.4]{beamerposter}
\RequirePackage{ifthen}
\RequirePackage[absolute,overlay]{textpos}
\RequirePackage{graphicx}
\RequirePackage{multicol}
\RequirePackage{color}
\RequirePackage{ragged2e}
\RequirePackage{environ}
%\RequirePackage{sectsty}
%\RequirePackage{xcolor}


%\sectionfont{\color{VertBleu}}

%---------------------
% Options Declaration
%---------------------
\newif\if@scientificpartner \@scientificpartnerfalse
\DeclareOption{scientificpartner}{\@scientificpartnertrue}

\newif\if@industrialpartner \@industrialpartnerfalse
\DeclareOption{industrialpartner}{\@industrialpartnertrue}

\newif\if@english \@englishfalse
\DeclareOption{english}{\@englishtrue}

\newif\if@onecolumn \@onecolumnfalse
\DeclareOption{onecolumn}{\@onecolumntrue}

\newif\if@twocolumn \@twocolumnfalse
\DeclareOption{twocolumn}{\@twocolumntrue}

\newif\if@threecolumn \@threecolumnfalse
\DeclareOption{threecolumn}{\@threecolumntrue}

\newif\if@header \@headerfalse
\DeclareOption{header}{\@headertrue}

\newif\if@footer \@footerfalse
\DeclareOption{footer}{\@footertrue}

\DeclareOption*{}%% Do nothing when option is unknown
\ProcessOptions


\if@scientificpartner
\newcommand{\scientificpartner}[1]{
  \def\@scientificpartnerimage{#1}
  }
\fi

\if@industrialpartner
\newcommand{\industrialpartner}[1]{
  \def\@industrialpartnerimage{#1}
  }
\fi

%\if@header
%%\NewEnviron{headerenv}{
%%  \BODY
%%}
%\newcommand{\header}[1]{
%  \def\@header{#1}
%}
%\fi

\if@footer
\newcommand{\footer}[1]{
  \def\@footer{#1}
  }
\fi


%------------------
% Hooks Definition
%------------------
\AtBeginDocument{
\setlength{\TPHorizModule}{1cm}
\setlength{\TPVertModule}{1cm}
\makeposter
\justify
%\setlength{\columnseprule}{5pt}
%\def\columnseprulecolor{\color{VertBleu}}
\setlength{\columnsep}{2cm}
%\begin{textblock}{74}(4, 20)
}

\AtEndDocument{
%\end{textblock}
}


%---------------
% Renewcommands
%---------------
\renewcommand{\figurename}{Fig}
\renewcommand{\tablename}{Tab}


%-------------
% NewCommands
%-------------
%\def\postertitle#1{\def\@postertitle{#1}} % Title 
\newcommand{\postertitle}[1]{
  \def\@postertitle{#1}
  %\def\@titlesize{#2}
  }

\newcommand{\postersubtitle}[1]{
  \def\@postersubtitle{#1}
  }

\newcommand{\authors}[1]{
  \def\@authors{#1}
  }
  
\newcommand{\institutes}[1]{
  \def\@institutes{#1}
  }

\newcommand{\contact}[1]{
  \def\@contact{#1}
  }


%------------------
% Renewenvironment
%------------------


%------------------
% Newenvironment
%------------------
% One-column Definition
\if@onecolumn
\newenvironment{poster}{
    %\begin{frame}
    \begin{textblock}{74}(4, 20)
    \if@header
        \begin{minipage}{0.99\textwidth}
            \begin{center}
                \@header
            \end{center}
        \end{minipage}
        \begin{minipage}{0.99\textwidth}
    \else
        \begin{minipage}{0.99\textwidth}
    \fi
}
{
    \end{minipage}
    \if@footer
        \begin{minipage}{0.99\textwidth}
            \begin{center}
                \@footer
            \end{center}
        \end{minipage}
    \fi
    \end{textblock}
    %\end{frame}
}
\fi


% Two-column Definition
\if@twocolumn
\newenvironment{poster}{
%\begin{frame}
    \begin{textblock}{74}(4, 20)
    \if@header
        \begin{minipage}{0.99\textwidth}
            \begin{center}
                \@header
            \end{center}
        \end{minipage}
        \begin{multicols*}{2}
    \else
        \begin{multicols*}{2}
    \fi
}
{
        \end{multicols*}
    \if@footer
        \begin{minipage}{0.99\textwidth}
            \begin{center}
                \@footer
            \end{center}
        \end{minipage}
    \fi
    \end{textblock}
%\end{frame}
}
\fi


% Three-column Definition
\if@threecolumn
\newenvironment{poster}{
    \begin{textblock}{74}(4, 20)
    \if@header
        \begin{minipage}{0.99\textwidth}
            \begin{center}
                \@header
            \end{center}
        \end{minipage}
        \begin{multicols}{3}
    \else
        \begin{multicols}{3}
    \fi
}
{
        \end{multicols}
    \if@footer
        \begin{minipage}{0.99\textwidth}
            \begin{center}
                \@footer
            \end{center}
        \end{minipage}
    \fi
    \end{textblock}
}
\fi







%\DeclareOption{showboxes}{\@showboxes}
%\DeclareOption{showboxes}{\PassOptionsToPackage{\CurrentOption}{textpos}}
%\ProcessOptions
%\ExecuteOptions{showboxes}

%\makeatletter

%\if@showboxes
%  \RequirePackage[absolute,overlay,showboxes]{textpos}
%\else
%  \RequirePackage[absolute,overlay]{textpos}
%\fi

%\usepackage[orientation=portrait, size=a0, scale=1.4]{beamerposter}
%\usepackage[absolute,overlay,showboxes]{textpos}

%\usepackage[T1]{fontenc}
%\usepackage{lmodern}
%\usepackage[utf8]{inputenc}
%\usepackage{lipsum}
%\usepackage{xparse}
%\usepackage[colorgrid,texcoord]{eso-pic}

%\usefonttheme{serif}
\usefonttheme{professionalfonts}
\usecolortheme{orchid}
\useoutertheme{default}


%\AtBeginSection{%
%  \setbeamercolor{section}{fg=VertBleu}
%}

\definecolor{VertBleu}{rgb}{0.055 0.596 0.576}
\definecolor{blanc}{rgb}{1 1 1}

\setbeamercolor{normal text}{fg=black}


%\setbeamercolor{section}{fg=VertBleu}

%-------------------
% Blocks Definition
%-------------------
\setbeamertemplate{blocks}[rounded]{}

%-------------
% Block color
%-------------
\setbeamercolor{block title}{use=structure,fg=white,bg=VertBleu}
\setbeamercolor{block title alerted}{use=alerted text,fg=white,bg=alerted text.fg!75!black}
\setbeamercolor{block title example}{use=example text,fg=white,bg=example text.fg!75!black}

\setbeamercolor{block body}{parent=normal text,use=block title,bg=block title.bg!10!bg}
\setbeamercolor{block body alerted}{parent=normal text,use=block title alerted,bg=block title alerted.bg!10!bg}
\setbeamercolor{block body example}{parent=normal text,use=block title example,bg=block title example.bg!10!bg}

%-------------------------------
% Navigation symbols suppression
%-------------------------------
\setbeamertemplate{navigation symbols}{}

%----------------------
% Caption Definition
%----------------------
\setbeamertemplate{caption}[numbered]
\setbeamerfont{caption name}{family=\sffamily}
\setbeamercolor{caption name}{fg=black}

%----------------------
% Enumerate Definition
%----------------------
\setbeamercolor{enumerate item}{fg=VertBleu}

%----------------------
% Description Definition
%----------------------
\setbeamercolor{description item}{fg=VertBleu}

%----------------------
% Itemize Definition
%----------------------
\setbeamercolor{itemize item}{fg=VertBleu}
\setbeamertemplate{itemize item}[circle]


%\renewcommand\thesection{\arabic{section}}
\newcounter{mysection}
\renewcommand{\section}{\@startsection {section}{1}{\z@}%
                                   {-1.5ex \@plus -1ex \@minus -.2ex}%
                                   {1.5ex \@plus.2ex}%
                                   {\normalfont\Large\bfseries\color{VertBleu}}}

\let\tempone\itemize
\let\temptwo\enditemize





\newcommand{\makeposter}
{
    % Background Definition
    %-----------------------
	\setbeamertemplate{background canvas}{\includegraphics[width=\paperwidth,height=\paperheight]{img/Template.png}}
	\begin{textblock}{49}(30, 5)
		\begin{minipage}{0.99\textwidth}
			\begin{flushright}
				\veryHuge{\textcolor{white}{\@postertitle}}
			\end{flushright}
			\begin{flushright}
				\Large{\textcolor{white}{\@postersubtitle}}
			\end{flushright}
			\begin{flushright}
				\normalsize{\textcolor{white}{\@authors}}
			\end{flushright}
			\begin{flushright}
				\small{\textcolor{white}{\@institutes}}
			\end{flushright}
		\end{minipage}
	\end{textblock}
	
	% Contact Definition
	%--------------------
	\begin{textblock}{75}(4, 105.5)
	 \textcolor{VertBleu}{\textbf{Contact:} \@contact}
	\end{textblock}
	
	% Promoter Informations
	%-----------------------
	\begin{textblock}{12}(4, 108)
        \begin{minipage}{0.99\textwidth}
            \begin{center}
                \if@english
                    \textcolor{VertBleu}{\textbf{Promoter}}
                \else
                    \textcolor{VertBleu}{\textbf{Promoteur}}
                \fi
            \end{center}
        \end{minipage}
	\end{textblock}
	
	% Industrial and Scientific Partner Titles Definition
	%-----------------------------------------------------
	\begin{textblock}{32}(20, 108)
    \if@industrialpartner
        \if@scientificpartner % \@industrialpartner == True && \@scientificpartner == True
            \begin{minipage}{0.49\textwidth}
                \begin{center}
                    \if@english
                        \textcolor{VertBleu}{\textbf{Industrial Partner}}
                    \else
                        \textcolor{VertBleu}{\textbf{Partenaire industriel}}
                    \fi
                \end{center}
            \end{minipage}
            \begin{minipage}{0.49\textwidth}
                \begin{center}
                    \if@english
                        \textcolor{VertBleu}{\textbf{Scientific Partner}}
                    \else
                        \textcolor{VertBleu}{\textbf{Partenaire scientifique}}
                    \fi
                \end{center}
            \end{minipage}
        \else %\@industrialpartner == True && \@scientificpartner == False
            \begin{minipage}{0.99\textwidth}
                \begin{center}
                    \if@english
                        \textcolor{VertBleu}{\textbf{Industrial Partner}}
                    \else
                        \textcolor{VertBleu}{\textbf{Partenaire industriel}}
                    \fi
                \end{center}
            \end{minipage}
        \fi
    \else
        \if@scientificpartner   %\@industrialpartner == False && \@scientificpartner == True
            \begin{minipage}{0.99\textwidth}
                \begin{center}
                    \if@english
                        \textcolor{VertBleu}{\textbf{Scientific Partner}}
                    \else
                        \textcolor{VertBleu}{\textbf{Partenaire scientifique}}
                    \fi
                \end{center}
            \end{minipage}
        \fi
    \fi
	\end{textblock}
	
	% Industrial and Scientific Partner Images Definition
	%-----------------------------------------------------
	\begin{textblock}{32}(20, 110)
        \if@industrialpartner
            \if@scientificpartner
                \begin{minipage}{0.49\textwidth}
                    \begin{center}
                    \@industrialpartnerimage
                    \end{center}
                \end{minipage}
                \begin{minipage}{0.49\textwidth}
                    \begin{center}
                    \@scientificpartnerimage
                    \end{center}
                \end{minipage}
            \else
                \begin{minipage}{0.99\textwidth}
                    \begin{center}
                    \@industrialpartnerimage
                    \end{center}
                \end{minipage}
            \fi
        \else
            \if@scientificpartner
                \begin{minipage}{0.99\textwidth}
                    \begin{center}
                    \@scientificpartnerimage
                    \end{center}
                \end{minipage}
            \fi
        \fi
	\end{textblock}
}

\endinput
